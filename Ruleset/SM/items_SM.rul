extended:
  tagsFile: Ruleset/tags_ROSIGMA.rul

items:
  - type: STR_STORMTALON_WEAPON  # flying missile launcher
    power: 130  # was 110
    damageAlter:  # DA MELTA MISSILES
      RandomType: 2  # 50-150%
      ToArmorPre: 0.50
      ArmorEffectiveness: 0.75

  - type: AUX_DREAD_ASSC  # dread ASSAULT CAN
    dropoff: 3
    hitSound: 13
    hitAnimation: 26
    power: 100
    damageType: 1
    clipSize: -1
    autoRange: 20
    accuracySnap: 75
    tuSnap: 30
    snapRange: 25
    confSnap:
      name: STR_BURST_SNAP_SHOT
      shots: 3
    damageAlter:  # DA BOLTER
      ToArmorPre: 0.05
      ArmorEffectiveness: 0.9
      ToArmor: 0.1
      ToHealth: 1.0
      ToStun: 0.5
    bulletSpeed: 50
    explosionSpeed: 5
    compatibleAmmo: !remove
      - STR_ASSC_CLIP

  - type: STR_ROCKET_LAUNCHER
    armor: 200
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
      - STR_IMPERIAL_WEAPONS
    costBuy: 100000
    costSell: 3000
    compatibleAmmo:
      - STR_SMALL_ROCKET
      - STR_LARGE_ROCKET
      - STR_INCENDIARY_ROCKET
      - STR_HEAVY_ROCKET_HE
      - STR_HEAVY_ROCKET_KRAK
      - STR_HEAVY_ROCKET

  - type: STR_PISTOL  # BOLTER PISTOL  10100
    armor: 200
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
      - STR_IMPERIAL_WEAPONS
    compatibleAmmo:
      - STR_PISTOL_CLIP
      - STR_PISTOL_CLIP_EX
      - STR_PISTOL_CLIP_AP
      - STR_PISTOL_CLIP_MC
    inventoryMoveCost: #quickdraw
      basePercent: 50
    tags:
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100

  - type: STR_MCPISTOL  # BOLTER PISTOL  10100
    armor: 200
    inventoryMoveCost: #quickdraw
      basePercent: 50
    tags:
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100

  - type: STR_PISTOLB  # BOLTER PISTOL  10110  TYPE BLUE
    armor: 200
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
      - STR_IMPERIAL_WEAPONS
    inventoryMoveCost: #quickdraw
      basePercent: 50
    tags:
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100

  - type: STR_PISTOLS    # Stalker boltpistol
    armor: 200
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
    inventoryMoveCost: #quickdraw
      basePercent: 50
    tags:
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100


  - type: STR_PISTOLH  # BOLTER PISTOL  10130 TYPE HYBRID
    armor: 200
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
    inventoryMoveCost: #quickdraw
      basePercent: 50
    tags:
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100

  - type: STR_RIFLE  # BOLTER  #         10300
    armor: 200
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
      - STR_IMPERIAL_WEAPONS
    costBuy: 10000

  - type: STR_RIFLEA  # BOLTER ARTIFEX DEATHWATCH
    categories: [STR_CAT_BOLTER, STR_CAT_TACTICAL]
    requiresBuy:
      - STR_DEATHWATCH
    bigSprite: 2010  # artifex boltgun bigob
    floorSprite: 210  # red
    handSprite: 684
    size: 0.3
    dropoff: 5
    costBuy: 10000
    costSell: 5000
    weight: 25
    bulletSprite: {mod: 40k, index: 6}
    fireSound: {mod: 40k, index: 707}
    compatibleAmmo:
      - STR_RIFLE_CLIP
      - STR_RIFLE_CLIP_MC
      - STR_RIFLE_CLIP_AP
      - STR_RIFLE_CLIP_EX
    battleType: 1
    twoHanded: true
    invWidth: 2
    invHeight: 3
    armor: 200
    autoShots: 3
    bulletSpeed: 30
    attraction: 1
    listOrder: 10305
    tags:
      ITEM_COLOR_CHANGES_WITH_AMMO: 15

  - type: STR_RIFLEB  # BOLTER  # To remove deathwatch requirement
    requiresBuy: !remove
      - STR_DEATHWATCH

  - type: STR_RIFLEB  # BOLTER  #        10310  TYPE BLUE
    armor: 200
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
      - STR_IMPERIAL_WEAPONS

  - type: STR_RIFLEC  # BOLTER  #        10320  TYPE STALKER           AIMED
    armor: 200
    ufopediaType: ""
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
      - STR_IMPERIAL_WEAPONS

  - type: STR_MCRIFLE  # BOLTER                 10400                   MC no aim
    categories: [STR_CAT_BOLTER, STR_CAT_TACTICAL]
    size: 0.3
    costSell: 2750
    weight: 20
    compatibleAmmo:
      - STR_RIFLE_CLIP
      - STR_RIFLE_CLIP_MC
      - STR_RIFLE_CLIP_AP
      - STR_RIFLE_CLIP_EX
    battleType: 1
    twoHanded: true
    invWidth: 2
    invHeight: 3
    autoShots: 3
    bulletSpeed: 30
    attraction: 1
    armor: 200
    listOrder: 10400

  - &STR_CHAINSWORD_TEMPLATE
    type: STR_CHAINSWORD  #         12400            DA CHAIN
    categories: [STR_CAT_MELEE, STR_CAT_ASSAULT]
    armor: 200
    power: 60
    weight: 15
    tuMelee: 15  # medium melee weapon
    costMelee:
      energy: 2  # medium melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    flatMelee: true
    accuracyMelee: 90
    meleeMultiplier:
      melee: 1.0
      flatHundred: 0.0
    damageBonus:
      melee: 0.2
      strength: 0.2
    damageAlter:
      ToArmorPre: 0.3
      ToHealth: 0.9
      RandomType: 2  # TFTD [50% - 150%]
      ToWound: 0.3
      ToEnergy: 0.5
      RandomWound: false
    clipSize: -1
    battleType: 3

  - type: STR_CHAINSWORD_MC  #       3007           DA CHAIN
    refNode: *STR_CHAINSWORD_TEMPLATE
    armor: 200
    weight: 12  # lighter
    power: 70  # somewhat more damaging
    accuracyMelee: 110  # significantly more accurate/better balanced
    tuMelee: 14  # slightly faster to swing
    damageAlter:
      RandomWound: false

  - type: STR_ELDAR_CHAINSWORD  #       3007           DA CHAIN
    refNode: *STR_CHAINSWORD_TEMPLATE
    weight: 12  # lighter
    power: 45  # less damaging
    accuracyMelee: 100  # somewhat more accurate
    tuMelee: 14  # slightly faster to swing
    damageBonus:
      melee: 0.3
      strength: 0.1
    damageAlter:
      RandomWound: false

  - type: STR_CHAINSWORD_STEEL_LEGION  #       3007           DA CHAIN
    refNode: *STR_CHAINSWORD_TEMPLATE
    costBuy: 5000
    costSell: 1250
    size: 0.2
    requiresBuy:
      - STR_STEEL_LEGION_STRATEGY
    invWidth: 1
    invHeight: 3
    bigSprite: 939
    floorSprite: 919
    handSprite: 1024
    meleeSound: {mod: 40k, index: 753}  # 753 Powerswrod miss
    meleeHitSound: {mod: 40k, index: 709}  # 709 chainhit
    meleeAnimation: {mod: 40k, index: 44}
    weight: 12  # lighter
    power: 45  # less damaging
    damageBonus:
      melee: 0.25
      strength: 0.15
    damageAlter:
      RandomWound: false

  - type: STR_HEAVY_CANNON  # Sniper Rifle
    armor: 200
    requiresBuy:
      - STR_MARINES_AND_INQUISITION
      - STR_IMPERIAL_WEAPONS
    accuracyMultiplier:  # sniper rifle accuracy
      firing: [0.5, 0.005]
    tags:
      REACTION_MULTIPLIER: 50
      REACTION_PENALTY_KNEELING_BYPASS: 1
      ITEM_AIMED_ACCURACY_POWER_BONUS: 50  # percent of the user's Firing Accuracy that applies as a damage bonus; used for precision weapons like sniper rifles
      ITEM_POWER_BONUS_PERCENTILE: 1  # use %
      ITEM_RECOIL: 25
      ITEM_IS_HEAVY_WEAPON: 1  # infantry but not mounted/vehicle heavy weapons

  - type: STR_SHOTGUN
    weight: 10  # +3 from 7 vanilla, makes the low weight carbines more attractive.
    armor: 200
    compatibleAmmo:
      - STR_SHOTGUN_SHELLS
      - STR_STUN_SHELLS
      - STR_STUN_GAS_SHELLS

  - type: STR_MCSHOTGUN
    weight: 9  # +2 from 7 vanilla, makes the low weight carbines more attractive.
    armor: 200
    compatibleAmmo:
      - STR_SHOTGUN_SHELLS
      - STR_SHOTGUN_SHELLS_MC
      - STR_STUN_SHELLS
      - STR_STUN_GAS_SHELLS

  - type: STR_HC_AP_AMMO  # SNIPER AP                   11910
    costBuy: 4000  # far better than hotshot cells or AP Stub Rifle rounds, but half the clipsize so2x the cost
    costSell: 1000
    armor: 200
    damageAlter:
      RandomType: 6
      ArmorEffectiveness: 0.5  # Armor piercing; reduced health damage in exchange for armor piercing
      ToHealth: 0.6  # Armor piercing; reduced health damage in exchange for armor piercing
      ToArmor: 0.05  # minor armor damage on penetration
      ToTile: 0.0

  - type: STR_HC_HE_AMMO  # SNIPER HE                   11920
    costBuy: 4000
    costSell: 1000
    armor: 200
    damageAlter:  # effectively a high powered bolter round
      ToArmorPre: 0.1  # was 0.05
      ArmorEffectiveness: 0.8  # was 0.9
      ToArmor: 0.1
      ToHealth: 1.15
      ToStun: 0.5
      FixRadius: 1
      RandomType: 6

  - type: STR_HC_I_AMMO  # SNIPER I                     11930
    costBuy: 4000
    costSell: 1000
    armor: 200
    damageAlter:
      RandomType: 6
      ToArmorPre: 0.05  # minor ablation
      ArmorEffectiveness: 0.9  # minor pentration
      FireThreshold: 0
      IgnoreDirection: false
      FireBlastCalc: false
      FixRadius: 0

  - type: STR_STUN_SHELLS
    categories: [STR_CAT_SHOTGUN, STR_CAT_SCOUT]
    shotgunBehavior: 1   # *** makes the shotgun a bit more useful at range bit tightening the spread ***
    shotgunSpread: 25
    size: 0.1
    costBuy: 1500
    costSell: 150
    weight: 3
    bigSprite: 3018
    floorSprite: {mod: 40k, index: 119}
    handSprite: {mod: 40k, index: 464}
    hitSound: {mod: 40k, index: 22}
    hitAnimation: {mod: 40k, index: 104}
    damageType: 6  # stun properties
    power: 40  # 40 for normal shotgun shells
    damageAlter:  # DA SHOTGUN
      ResistType: 3  # concussive resists; less lethal
      ToArmorPre: 0.02
      ArmorEffectiveness: 0.7
      ToHealth: 0.1
      ToWound: 0.05
      RandomWound: false
      ToStun: 0.6
      ToEnergy: 1.0
      ToTime: 1.0
      ToTile: 0.0
      ToItem: 0.0
      ToArmor: 0.0
    clipSize: 8
    battleType: 2
    armor: 200
    listOrder: 10710

  - type: STR_STUN_GAS_SHELLS  #                        10710
    categories: [STR_CAT_SHOTGUN, STR_CAT_SCOUT]
    shotgunBehavior: 1   # *** makes the shotgun a bit more useful at range bit tightening the spread ***
    shotgunSpread: 25
    size: 0.1
    costBuy: 1500
    costSell: 150
    weight: 3
    bigSprite: 3017
    floorSprite: {mod: 40k, index: 119}
    handSprite: {mod: 40k, index: 464}
    hitSound: {mod: 40k, index: 832}  # blight rocket
    hitAnimation: 1020  # pink skull splosion
    damageType: 8  # acid stun gas smoke bypasses
    power: 30  # 40 for normal shotgun shells
    damageAlter:  # DA SHOTGUN
      ArmorEffectiveness: 0.25  # low power, armor still offers some protection although it may target under armor value.
      ToHealth: 0.05
      ToWound: 0.01
      RandomWound: false
      ToStun: 0.5
      ToEnergy: 1.5
      ToTime: 1.5
      ToTile: 0.0
      ToItem: 0.0
      ToArmor: 0.0
      FixRadius: 3
    clipSize: 8
    battleType: 2
    armor: 200
    listOrder: 10710

  - type: STR_SHOTGUN_SHELLS  #                        10710
    categories: [STR_CAT_SHOTGUN, STR_CAT_SCOUT]
    size: 0.1
    costBuy: 500
    costSell: 150
    weight: 3
    battleType: 2
    armor: 200
    listOrder: 10710

  - type: STR_MELTA_AMMO  # MELTAGUN AMMO                2020
    categories: [STR_CAT_MELTA, STR_CAT_TACTICAL]
    vaporColorSurface: {mod: 40k, index: 1}
    vaporDensitySurface: 2
    vaporProbabilitySurface: 85
    requires:
      - STR_MELTAGUN_TECH
    size: 0.2
    costSell: 700  # manufactured
    weight: 3
    power: 15
    damageType: 11
    damageAlter:  # DA MELTA
      RandomType: 1
      ToArmorPre: 1.0
      ToHealth: 1.6
      ToTile: 6.0
      ToWound: 0.05
      RandomWound: false
      TileDamageMethod: 2
      FireThreshold: 16
    shotgunBehavior: 1
    shotgunPellets: 10
    shotgunSpread: 0
    powerRangeReduction: 1.0
    powerRangeThreshold: 3.0
    clipSize: 10
    battleType: 2
    invWidth: 1
    invHeight: 2
    recoveryPoints: 1
    armor: 200
    listOrder: 11150


  - type: STR_BLASTER_BOMB  # MULTIMELTA AMMO            2023
    categories: [STR_CAT_MELTA, STR_CAT_DEVASTATOR]
    vaporColorSurface: {mod: 40k, index: 1}
    vaporDensitySurface: 2
    vaporProbabilitySurface: 85
    requires:
      - STR_BLASTER_BOMB
    size: 0.2
    costSell: 5000
    weight: 3
    power: 15
    damageType: 11
    damageAlter:  # DA MELTA Double
      RandomType: 1
      ToArmorPre: 1.0
      ToHealth: 1.6
      ToTile: 6.0
      ToWound: 0.05
      RandomWound: false
      TileDamageMethod: 2
      FireThreshold: 16
    shotgunBehavior: 1
    shotgunPellets: 20
    shotgunSpread: 0
    powerRangeReduction: 0.5
    powerRangeThreshold: 10.0
    clipSize: 3
    battleType: 2
    invWidth: 1
    invHeight: 2
    recoveryPoints: 1
    armor: 200
    listOrder: 12320

  - type: STR_DREAD_MELEE_WEAPON
    categories: [STR_CAT_AUXILIARY]
    weight: 3
    clipSize: -1
    strengthApplied: false
    power: 110  # melee
    damageType: 7
    accuracyMelee: 100
    tuMelee: 15
    battleType: 3
    fixedWeapon: true
    invWidth: 2
    invHeight: 3
    recover: false
    flatRate: true
  - type: STR_HWP_FUSION_BOMB  # DREAD missele System         6635
    categories: [STR_CAT_AUXILIARY]
    size: 0.6
    costSell: 30000
    transferTime: 48
    weight: 20
    power: 130
    damageType: 3
    damageAlter:
      RandomType: 2  # TFTD [50% - 150%]
      ToArmorPre: 0.50
      ArmorEffectiveness: 0.75
    clipSize: 8
    battleType: 2
    invWidth: 2
    invHeight: 3
    blastRadius: 11
    listOrder: 6635

  # - type: STR_HWP_CANNON_SHELLS

  - type: AUX_RAM  # AUX BIKE ARMOR AUX
    bigSprite: {mod: 40k, index: 222}
    meleeSound: {mod: 40k, index: 753}  # 753 Powerswrod miss
    meleeHitSound: {mod: 40k, index: 709}  # 709 chainhit
    meleeAnimation: {mod: 40k, index: 44}
    power: 105  # melee
    damageAlter:  # DA CHAIN
      ToArmorPre: 0.3
      ToHealth: 0.9
      RandomType: 2  # TFTD [50% - 150%]
      ToWound: 0.3
      ToEnergy: 0.5
      RandomWound: false
    accuracyMelee: 150
    tuMelee: 10

  - type: STR_AUTO_CANNON
    armor: 200
    requiresBuy:
      - STR_MARINES_STRATEGY

  # - type: STR_PLASMA_PISTOL_TERRAN
  #   weight: 4  # was 10  # MC PP has weight 3

  - type: STR_MCPLASMA_PISTOL
    armor: 200
    weight: 10

  - type: STR_FLAMETHROWER
    armor: 200
    compatibleAmmo:
      - STR_FLAMETHROWER_CLIP
      - STR_FLAMETHROWER_PROMETHIUM_CLIP

  - type: STR_INCENDIARY_ROCKET
    armor: 200
    damageType: 2
    damageAlter:
      IgnoreDirection: false
      FireBlastCalc: false
      RandomType: 6
      FireThreshold: 1
      ArmorEffectiveness: 1
      FixRadius: 7

  - &STR_POWER_MELEE_WEAPON
    type: STR_MFIST_TEMPLATE
    categories: [STR_CAT_MELEE, STR_CAT_ASSAULT]
    armor: 200
    damageType: 5
    damageAlter:     # DA POWER
      ArmorEffectiveness: 0.7
      ToArmorPre: 0.2
      ToHealth: 0.9
      RandomType: 6
    clipSize: -1
    battleType: 3

  - &STR_POWER_FIST_WEAPON
    type: STR_POWERFIST
    armor: 200
    refNode: *STR_POWER_MELEE_WEAPON
    tuMelee: 25  # slow and cumbersome, but hard hitting; especially for terminators
    costMelee:
      energy: 4  # heavy melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    meleeMultiplier:
      melee: 0.7
      strength: 0.3  # need strength as well as skill to wield this cumbersome weapon
    flatMelee: true
    power: 40
    damageBonus:  # meleeBonus: only works if this was a gun
      strength: 1.5  # greatly magnifies your strength
    accuracyMelee: 70
    specialUseEmptyHand: true
    specialUseEmptyHandShow: true

  - type: STR_MFIST
    refNode: *STR_POWER_FIST_WEAPON

  - type: STR_POWERFIST_STEEL_LEGION
    refNode: *STR_POWER_FIST_WEAPON
    costBuy: 10000
    costSell: 2500
    invHeight: 2
    invWidth: 2
    size: 0.1
    requiresBuy:
      - STR_STEEL_LEGION_STRATEGY_MIDTIER
    bigSprite: 938
    floorSprite: 918
    handSprite: 1032
    meleeSound: {mod: 40k, index: 710}  # 710 powerfist miss
    meleeHitSound: {mod: 40k, index: 772}  # 772 powerfist hit
    meleeAnimation: {mod: 40k, index: 28}  # 28 bolt anitmation
    weight: 15
    tuMelee: 22  # slow and cumbersome, but hard hitting; especially for terminators
    costMelee:
      energy: 4  # heavy melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    meleeMultiplier:
      melee: 0.7
      strength: 0.3  # need strength as well as skill to wield this cumbersome weapon
    flatMelee: true
    power: 40
    damageBonus:  # meleeBonus: only works if this was a gun
      strength: 1.2  # greatly magnifies your strength
    accuracyMelee: 80

  - &STR_POWER_SWORD_WEAPON
    type: STR_POWER_SWORD
    refNode: *STR_POWER_MELEE_WEAPON
    armor: 200
    costMelee:
      time: 15
      energy: 2  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    flatMelee: true
    power: 100
    damageBonus:
      strength: 0.2
      melee: 0.3
    meleeMultiplier:
      melee: 0.9
      reactions: 0.1

  - type: STR_CPOWER_SWORD
    refNode: *STR_POWER_SWORD_WEAPON

  - type: STR_CPOWER_AXE
    refNode: *STR_POWER_SWORD_WEAPON
    damageBonus:
      strength: 0.3
      melee: 0.2
    meleeMultiplier:
      melee: 1.0

  - type: STR_CPOWER_DAGGER
    refNode: *STR_POWER_SWORD_WEAPON
    costMelee:
      time: 10
      energy: 1  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    flatMelee: true
    power: 50
    damageBonus:
      strength: 0.1
      melee: 0.4
    meleeMultiplier:
      melee: 0.7
      reactions: 0.3
    accuracyMelee: 110

  - type: STR_EPOWER_SWORD
    refNode: *STR_POWER_SWORD_WEAPON
    costMelee:
      time: 12
      energy: 2  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    flatMelee: true
    power: 80
    damageBonus:
      strength: 0.1
      melee: 0.4
    meleeMultiplier:
      melee: 0.7
      reactions: 0.3
    accuracyMelee: 100

  - type: STR_POWER_SWORD_SUP  # saint sword
    refNode: *STR_POWER_SWORD_WEAPON
    weight: 15  # lighter
    fireSound: {mod: 40k, index: 753}
    explosionHitSound: {mod: 40k, index: 101}  # stabhit
    hitAnimation: 2040  # Bloodgush sprite, X1.pck for ranged attacks, was 1070  # AOEMELEEGENE.png
    hitAnimFrames: 8
    powerForAnimation: 10
    hitSound: {mod: 40k, index: 101}  # stabhit
    bulletSprite: 5
    clipSize: -1
    invWidth: 2
    invHeight: 3
    snapRange: 2
    maxRange: 2
    powerRangeThreshold: 3
    powerRangeReduction: 200
    battleType: 1
    damageType: 11  # melta
    meleeType: 11
    confSnap:
      name: STR_HALLEBARD_SNAPSHOT_LUNGE
      shots: 1
    costSnap:
      time: 20
      energy: 4
    accuracySnap: 80
    accuracyMelee: 80
    accuracyMultiplier:
      melee: 0.6
      psiSkill: 0.4
    meleeMultiplier:
      melee: 0.6
      psiSkill: 0.4
    power: 10
    meleePower: 10
    damageBonus:
      psi: 0.01  # incorporeal/spiritual weapon
    meleeBonus:
      psi: 0.01  # incorporeal/spiritual weapon
    costMelee:
      time: 12  # swings faster
      energy: 2  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    flatMelee:
      time: true
      energy: true
    damageAlter:     # DA POWER
      ArmorEffectiveness: 0.5
      FireThreshold: 0
      ToHealth: 0.7
      ToMorale: 1.0
      ToWound: 0.0
      RandomWound: false
      RandomType: 6
      IgnoreSelfDestruct: false
    meleeAlter:     # DA POWER
      ArmorEffectiveness: 0.5
      FireThreshold: 0
      ToHealth: 0.75
      ToMorale: 1.0
      ToWound: 0.0
      RandomWound: false
      RandomType: 6
      IgnoreSelfDestruct: false
    tags:
      REACTION_MULTIPLIER: 200
      DAMAGE_BONUS_PERCENT_DAEMONIC: 150 #1.5x damage vs Daemons

  - type: STR_POWER_SWORD_MC
    refNode: *STR_POWER_SWORD_WEAPON
    weight: 15  # lighter
    costMelee:
      time: 12  # swings faster
      energy: 2  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8

  - type: STR_POWERKNUCKLE
    refNode: *STR_POWER_MELEE_WEAPON
    costMelee:
      time: 10
      energy: 1  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    flatMelee: true
    power: 30
    damageBonus:
      strength: 0.2  # magnifies your strength
      melee: 0.3
    meleeMultiplier:
      melee: 0.7
      reactions: 0.3  # need strength as well as skill to wield this cumbersome weapon
    experienceTrainingMode: 13  # trains reactions
    accuracyMelee: 80

  - type: STR_HYPERPHASESWORD
    armor: 400

  - type: STR_HALLEBARD
    refNode: *STR_POWER_MELEE_WEAPON
    armor: 200
    fireSound: {mod: 40k, index: 753}
    explosionHitSound: {mod: 40k, index: 101}  # stabhit
    hitAnimation: 2040  # Bloodgush sprite, X1.pck for ranged attacks, was 1070  # AOEMELEEGENE.png
    hitAnimFrames: 8
    powerForAnimation: 10
    hitSound: {mod: 40k, index: 101}  # stabhit
    bulletSprite: 5
    clipSize: -1
    snapRange: 2
    maxRange: 2
    powerRangeThreshold: 3
    powerRangeReduction: 200
    power: 100  # lower base damage; compensated for by stat scaling
    meleePower: 100
    battleType: 1
    damageType: 11  # melta damage; more effective against daemons
    meleeType: 11  # melta damage; more effective against daemons
    confSnap:
      name: STR_HALLEBARD_SNAPSHOT_LUNGE
      shots: 1
    costSnap:
      time: 25  # lunge costs more TU and energy
      energy: 12
    accuracySnap: 90
    accuracyMelee: 90
    accuracyMultiplier:
      firing: 0.0
      melee: 0.8
      strength: 0.2
    meleeMultiplier:
      firing: 0.0
      melee: 0.8
      strength: 0.2
    skillApplied: false
    damageBonus:
      strength: 0.3  # strength matters more than skill given weapon size in terms of damage scaling
      melee: 0.2
      psi: 0.01  # infused by psychic power
    meleeBonus:
      strength: 0.3  # strength matters more than skill given weapon size in terms of damage scaling
      melee: 0.2
      psi: 0.01  # infused by psychic power
    costMelee:
      time: 22
      energy: 8  # very heavy melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    flatRate: true
    tags:
      ITEM_STRENGTH_REQUIREMENT: 100
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100
      DAMAGE_BONUS_PERCENT_DAEMONIC: 150 #1.5x damage vs Daemons

  - &STR_NARTHECIUM_TEMPLATE
    type: AUX_MEDI_KIT      # AUX MEDI KIT
    medikitTargetImmune: true
    tuMelee: 15  # Lower TU cost from Mastercrafting
    bigSprite: {mod: 40k, index: 24}
    floorSprite: {mod: 40k, index: 24}
    meleeSound: {mod: 40k, index: 753}
    meleeHitSound: {mod: 40k, index: 709}
    meleeAnimation: {mod: 40k, index: 44}
    battleType: 6
    invWidth: 2
    invHeight: 3
    meleeBonus:
      strength: 0.2
      melee: 0.2
      bravery: 0.1
    meleeAlter:  # DA CHAIN
      ArmorEffectiveness: 0.9
      ToArmorPre: 0.3
      ToHealth: 0.9
      RandomType: 6
      ToWound: 0.3
      RandomWound: false
      ToEnergy: 0.5
    costMelee:
      time: 15
      energy: 2
    flatMelee:
      time: true
      energy: true
    woundRecovery: 1
    healthRecovery: 3
    stunRecovery: 4
    energyRecovery: 10
    tuUse: 10
    accuracyMelee: 70
    experienceTrainingMode: 19  # *** makes the apothecary medikit item train bravery ***
    recover: false
    fixedWeapon: true

  - type: AUX_MEDI_KIT_ADVANCED      # AUX MEDI KIT - Advanced Narthecium for Level 4/Paladin GK Apothecary Armor
    refNode: *STR_NARTHECIUM_TEMPLATE
    painKiller: 40  # More uses from Advanced
    heal: 40  # More uses from Advanced
    stimulant: 40  # More uses from Advanced
    healthRecovery: 5  # +2 HP recovery
    stunRecovery: 6  # +2 Stun recovery
    energyRecovery: 15  # +5 Energy recovery

  - type: AUX_MEDI_KIT_MC      # AUX MEDI KIT - Mastercrafted Narthecium for Level 5/Captain GK Apothecary Armor
    refNode: *STR_NARTHECIUM_TEMPLATE
    painKiller: 40  # More uses from Mastercrafting
    heal: 40  # More uses from Mastercrafting
    stimulant: 40  # More uses from Mastercrafting
    healthRecovery: 5  # +2 HP recovery
    stunRecovery: 6  # +2 Stun recovery
    energyRecovery: 15  # +5 Energy recovery
    tuUse: 8  # faster
    accuracyMelee: 90  # Improved accuracy from Mastercrafting
    costMelee:
      time: 14  # reduced TU cost from Mastercrafting
      energy: 2

  - type: AUX_PROBE_ADVANCED                                                 # TOME
    # psiAttackName: STR_ANALYZE  # string id of psi-amp attack name in the pop-up menu. Required to enable special attack.
    weight: 0
    hitSound: 37
    battleType: 8
    LOSRequired: true
    tuUse: 1  # more TU efficient than the basic Techmarine suite
    recover: false
    fixedWeapon: true
    specialIconSprite: 5
    specialUseEmptyHand: true
    # *** Melee
    confMelee:
      name: STR_REPAIR
    meleeSound: {mod: 40k, index: 698}
    meleeHitSound: {mod: 40k, index: 699}
    meleeAnimation: {mod: 40k, index: 32}
    meleeType: 0
    meleePower: 60
    accuracyMelee: 100
    meleeBonus:
      strength: 0.5
    meleeAlter:  # REPAIR
      RandomType: 3
      ToHealth: 0.0
      ToStun: 0.0
      ToArmor: -1.0
      ToWound: 0.0
      RandomWound: false
      RandomStun: false
      ArmorEffectiveness: 0.0
    meleeMultiplier:
      melee: 0.9  # Slightly better multiplier than the basic Techmarine suite
    costMelee:
      time: 10  # more TU and energy efficient than the basic Techmarine suite
      energy: 30
    tags:
      ITEM_REPAIRS_ARMOR: 1
      ITEM_IS_BUFF_WEAPON: 1
      ITEM_DAMAGE_PERCENT_VS_MECHANICAL: 100

  - type: AUX_CROZIUS                                               # Time to nerf this to sanity
    costAimed:
      time: 40
      energy: 40
      morale: 20
    costSnap:
      time: 20
      energy: 40
      morale: 20
    power: 10
    damageType: 2
    damageAlter:
      RandomType: 6
      FireBlastCalc: false
      IgnoreOverKill: false
      IgnoreSelfDestruct: false  # default true for HE, fire, smoke, stun, mel
      ToHealth: 1.0
      ToTile: 0.3
      ToItem: 0.3
      ToMorale: 5.0
      ArmorEffectiveness: 0.5
      FixRadius: -1
    damageBonus:
      bravery: 0.5
      psiSkill: 0.5
    # melee
    meleePower: 100
    meleeBonus:
      strength: 0.2
      melee: 0.2
      bravery: 0.1
    costMelee:
      time: 20
      energy: 4  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    meleeType: 5
    meleeAlter:     # DA POWER
      ArmorEffectiveness: 0.7
      ToArmorPre: 0.2
      ToHealth: 0.9
      RandomType: 2  # TFTD [50% - 150%]
    dropoff: 5
    aimRange: 20
    snapRange: 15
    powerRangeThreshold: 20
    powerRangeReduction: 5

  - type: STR_CLAWS
    refNode: *STR_POWER_MELEE_WEAPON
    costMelee:
      time: 10
      energy: 4  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    power: 80
    damageBonus:
      strength: 0.2
      melee: 0.3
    accuracyMelee: 80
    meleeMultiplier:
      melee: 0.9
      reactions: 0.1

  - &STR_POWER_MELEE_WEAPON_HAMMER
    type: STR_HAMMER
    refNode: *STR_POWER_MELEE_WEAPON
    costMelee:
      time: 25
      energy: 8  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    flatMelee: true
    power: 120
    damageBonus:
      strength: 1.0
      melee: 0.2
    meleeAlter:     # DA POWER
      ArmorEffectiveness: 0.6  # armor breaking
      ToArmorPre: 0.3
    meleeMultiplier:  # very heavy and cumbersome; strength matters a lot for hitting
      melee: 0.6
      strength: 0.4
    accuracyMelee: 80

  - type: STR_HAMMER_MC
    refNode: *STR_POWER_MELEE_WEAPON_HAMMER
    weight: 70
    costMelee:
      time: 22
      energy: 8  # light melee weapon; light 1 energy, medium 2, heavy 4, very heavy 8
    accuracyMelee: 90

  - type: STR_BIKE_ARMOR
    requiresBuy:
      - STR_NOT_PRIMARIS
      - STR_MARINES_STRATEGY

  - type: STR_GRAV_FLAMER
    powerRangeReduction: 15
    powerRangeThreshold: 11

  - type: STR_MFIST
    specialUseEmptyHand: true

  - type: STR_UNARMED_GAUNTLET_PLUS
    specialIconSprite: {mod: 40k, index: 4}
    power: 20
    damageType: 7
    damageBonus:
      strength: 0.3
      melee: 0.3
    damageAlter:
      RandomType: 1
      IgnoreDirection: false
      ToStun: 0.5
      ToHealth: 1.0
    accuracyMelee: 90
    meleeMultiplier:
      reactions: 0.25
      melee: 0.75
    costMelee:
      time: 10
      energy: 1
    flatMelee:
      time: true
      energy: true

  - type: STR_CRATED_RHINO




# Blood Ravens Corpse items
  - type: STR_MK7_BLOODRAVENS_CORPSE  # CORPSE
    size: 0.4
    costSell: 0
    weight: 40
    bigSprite: 2970
    floorSprite: 2970
    invWidth: 2
    invHeight: 3
    recover: false
    battleType: 11
    armor: 80

  - type: STR_BLOODRAVENS_TACTICAL_AI_CORPSE
    size: 0.4
    costSell: 0
    weight: 40
    bigSprite: 2970
    floorSprite: 2970
    invWidth: 2
    invHeight: 3
    recover: false  # true? For kill tokens, potentially.
    battleType: 11
    armor: 80

  # - type: STR_FLOATER_CORPSE_PLAYER      # 19600
    # name: STR_CORPSE
    # size: 0.4
    # costSell: 0
    # weight: 40
    # bigSprite: {mod: 40k, index: 318}
    # floorSprite: {mod: 40k, index: 48}
    # invWidth: 2
    # invHeight: 3
    # recover: false
    # battleType: 11
    # armor: 80
    # listOrder: 19600

# Workaround for STR_HERETICAL_INQUISITOR_STRATEGY "item" crash (view report on finishing research project).
  - type: STR_HERETICAL_INQUISITOR_STRATEGY  # it now has an ITEM and doesnt crash. Weird.
    size: 0.8
  - type: STR_SUMMON_DAEMONS_RESEARCH  # same deal
    size: 0.8

# Tome/Banner nerfs

  - type: STR_BANNER  #             30600
    armor: 200
    # costBuy: 0  # cannot buy this; only make it at the cost of tokens
    requiresBuy:
      - STR_GENERALLOCK
    damageBonus:  # scales with bravery and devotion now
      bravery: 0.5
      psiSkill: 0.5
    damageType: 0
    damageAlter:
      RandomType: 3
      RadiusEffectiveness: 0.3
      ArmorEffectiveness: 0.0
      ToStun: 0.4  # increase the stun amount up from 0.1
      ToMorale: -0.18
      ToTime: -1.00
      ToHealth: 0.00
      ToArmor: 0.00
      ToItem: 0.00
      ToTile: 0.00
      ToWound: 0.00
      RandomWound: false
      FixRadius: 3
    costAimed:  # lowered cost
      time: 80  # was 60 but now % instead of flat
      energy: 80
      morale: 20
      stun: 25  # need to limit recursive use of this weapon
    flatAimed:
      time: false  # was true
      energy: false
    powerRangeThreshold: 3
    powerRangeReduction: 5
    arcingShot: false
    tags:
      ITEM_IS_BUFF_WEAPON: 1
      ITEM_DAMAGE_PERCENT_VS_MECHANICAL: 0
      ITEM_DAMAGE_PERCENT_VS_PILOTED: 50

  - type: STR_PATCHMORAL  # SPEED                           9001
    damageBonus:
      bravery: 0.5
      psiSkill: 0.5
    costMelee:
      stun: 5
      morale: 10
      time: 25
      energy: 25
    damageType: 0
    damageAlter:
      RandomType: 3
      FixRadius: 3
      ArmorEffectiveness: 0.0
      ToStun: 0.2
      ToHealth: 0.0
      ToMorale: -1.00
      ToItem: 0.00
      ToTile: 0.00
      ToArmor: 0.00
      ToWound: 0.00
      RandomWound: false
    tags:
      ITEM_IS_PSYCHIC_POWER: 1
      ITEM_IS_BUFF_WEAPON: 1
      ITEM_DAMAGE_PERCENT_VS_MECHANICAL: 0
      ITEM_DAMAGE_PERCENT_VS_PILOTED: 100
      ITEM_PSYCHIC_POWER_MODIFIER: 5

  - type: STR_PATCHSMOKE  # SPEED                           9001
    damageBonus:
      psi: 0.15  # this is magic/psychic power; bravery has nothing to do with it
    costAimed:
      time: 50
      stun: 25
      morale: 20
      energy: 50
    damageAlter:
      ToHealth: 0.0
      ToItem: 0.00
      ToTile: 0.00
      ToArmor: 0.00
      ToWound: 0.00
      RandomWound: false
    tags:
      ITEM_IS_PSYCHIC_POWER: 1
      ITEM_PSYCHIC_POWER_MODIFIER: 10
      ITEM_PSYCHIC_POWER_FLAT_CHECK: 1  # if we only check for perils once per turn

  - type: STR_PATCHSPEED  # SPEED                           9001
    damageType: 0
    damageBonus:
      psi: 0.01  # this is magic/psychic power; bravery has nothing to do with it
    damageAlter:
      RandomType: 3
      RadiusEffectiveness: 0.3
      ArmorEffectiveness: 0.0
      ToStun: 0.2
      ToHealth: 0.05  # time dilation is stressful and unnerving
      ToWound: 0.00
      RandomWound: false
      ToMorale: 0.2  # time dilation is stressful and unnerving
      ToTime: -1.00
      ToItem: 0.00
      ToTile: 0.00
      ToArmor: 0.00
    costMelee:
      time: 25
      stun: 25
      morale: 10
      energy: 50
    tags:
      ITEM_IS_BUFF_WEAPON: 1
      ITEM_IS_PSYCHIC_POWER: 1
      ITEM_PSYCHIC_POWER_MODIFIER: 1

  - type: STR_CHAPLAIN_INSPIRE
    categories: [STR_CAT_SPELLS]
    specialIconSprite: 210  # faith icon
    fireSound: [{mod: 40k, index: 758}, {mod: 40k, index: 759}, {mod: 40k, index: 760}, {mod: 40k, index: 761}, {mod: 40k, index: 762}, {mod: 40k, index: 763}]
    hitSound: {mod: 40k, index: 779}  # page
    hitAnimation: {mod: 40k, index: 1100}
    weight: 0
    power: 10
    damageBonus:
      bravery: 0.5
      psiSkill: 0.5  # devotion
    damageType: 0
    damageAlter:
      RandomType: 3
      ArmorEffectiveness: 0
      ToStun: 0.3
      ToMorale: -1.00
      ToTime: -1.00
      ToHealth: 0.0
      ToWound: 0.0
      ToTile: 0.0  # this shouldn't blow up cover
      ToItem: 0.0  # this shouldn't damage items
      ToArmor: 0.0  # this shouldn't damage armor
      RandomWound: false
    confAimed:
      name: STR_INSPIRE
    costAimed:
      time: 25
      energy: 30
      stun: 20
    accuracyAimed: 100
    accuracyMultiplier:
      firing: 0.0
      bravery: 2.2
    maxRange: 7
    powerRangeThreshold: 2
    powerRangeReduction: 5.0
    battleType: 1
    twoHanded: false
    invWidth: 1
    invHeight: 2
    fixedWeapon: true
    recover: false
    flatRate: true
    clipSize: -1
    experienceTrainingMode: 19
    # *** Melee gauntlet
    specialUseEmptyHand: true
    meleeHitSound: {mod: 40k, index: 100}
    meleeAnimation: 0
    meleePower: 10
    meleeType: 7
    meleeBonus:
      strength: 0.25
      melee: 0.25
    meleeAlter:
      RandomType: 1
      IgnoreDirection: false
      ToStun: 0.5
      ToHealth: 1.0
    accuracyMelee: 90
    meleeMultiplier:
      reactions: 0.25
      melee: 0.75
    tuMelee: 12
    flatMelee:
      time: true
    tags:
      ITEM_IS_BUFF_WEAPON: 1
      ITEM_DAMAGE_PERCENT_VS_MECHANICAL: 0
      ITEM_DAMAGE_PERCENT_VS_PILOTED: 50

  - type: STR_THUNDERFIRE_P
    compatibleAmmo:
      - STR_THUNDERFIRE_SHELL_P

  - type: STR_THUNDERFIRE_SHELL  # high explosive
    categories: [STR_CAT_AUXILIARY]
    power: 130
    damageType: 3
    damageAlter:
      RandomType: 2
      ArmorEffectiveness: 0.9  # concussive
      ToStun: 0.6  # concussive
      ToEnergy: 0.4  # concussive
      ToTime: 0.3  # concussive
      ToTile: 1.0  # high explosive
      ToItem: 1.0  # high explosive
      FixRadius: 5

  - type: STR_THUNDERFIRE_SHELL_P  # high explosive
    categories: [STR_CAT_AUXILIARY]
    size: 0.1
    costSell: 100
    transferTime: 48
    weight: 1
    hitSound: {mod: 40k, index: 21}
    explosionHitSound: {mod: 40k, index: 792}  # 792 Smoke
    hitAnimation: {mod: 40k, index: 104}  # XSmoke
    bigSprite: {mod: 40k, index: 647}
    floorSprite: {mod: 40k, index: 642}
    handSprite: {mod: 40k, index: 1720}
    fireSound: {mod: 40k, index: 12}
    clipSize: 4
    battleType: 2
    bulletSprite: 4
    bulletSpeed: 50
    power: 130
    damageType: 3
    damageAlter:
      RandomType: 2
      ArmorEffectiveness: 0.9  # concussive
      ToStun: 0.6  # concussive
      ToEnergy: 0.4  # concussive
      ToTime: 0.3  # concussive
      ToTile: 1.0  # high explosive
      ToItem: 1.0  # high explosive
      FixRadius: 5
    invWidth: 2
    invHeight: 3
    recover: false  # we don't recover these

# Craft items
  - type: STR_STORMBOLTER_TURRET_SPAWNER
    spawnUnit: STR_STORMBOLTER_TURRET
    spawnUnitFaction: 0
    invWidth: 0
    invHeight: 0
    battleType: 4
    recover: false
    hitAnimation: {mod: 40k, index: 1992}


  - type: STR_RAZORBACK_SPAWNER
    spawnUnit: STR_RAZORBACK_WITH_SMOKE

  - &STR_GK_STORMBOLTER_TEMPLATE
    type: STR_GK_HB
    compatibleAmmo:
      - STR_HB_CLIP
      - STR_HB_CLIP_MC
      - STR_STORMBOLTER_PSI_MAG
    bigSprite: 2520

  - type: STR_GK_HB_MC
    refNode: *STR_GK_STORMBOLTER_TEMPLATE
    bigSprite: 2521

# dungeon specific start

  - type: STR_SIGNAL_CORPSE_HULK
    name: STR_CORPSE
    weight: 40
    bigSprite: 2737
    floorSprite: 2742
    invWidth: 2
    invHeight: 3
    armor: 80
    battleType: 11
    recover: false

  - type: AUX_PRAEDATOR
    weight: 10
    bigSprite: {mod: 40k, index: 262}
    bulletSprite: {mod: 40k, index: 22}
    fireSound: {mod: 40k, index: 1225}
    clipSize: 1
    accuracyAimed: 200
    tuAimed: 30
    confAimed:
      name: STR_PRAEDAT_POSITION
    hitSound: 0
    hitAnimation: 0
    power: 150
    damageType: 3
    battleType: 1
    twoHanded: false
    invWidth: 2
    invHeight: 3
    arcingShot: true
    bulletSpeed: -10
    minRange: 5
    dropoff: 0
    recover: false
    fixedWeapon: true
    specialIconSprite: 993
    specialUseEmptyHand: false

# dungeon specific end

# Primaris

  - &STR_PRIMARIS_CARBINE_TEMPLATE
    type: STR_PRIMARIS_CARBINE  # BOLTER  #        10330  TYPE RIFLE
    requiresBuy:
      - STR_PRIMARIS
    categories: [STR_CAT_BOLTER, STR_CAT_TACTICAL]
    requiresBuyBaseFunc: [IMPERIUM]
    size: 0.3
    dropoff: 5
    costBuy: 30000
    costSell: 7500
    weight: 20
    bigSprite: 1050
    floorSprite: 979
    handSprite: 1164
    bulletSprite: 6
    fireSound: {mod: 40k, index: 707}
    compatibleAmmo:
      - STR_RIFLE_CLIP
      - STR_RIFLE_CLIP_MC
      - STR_RIFLE_CLIP_AP
      - STR_RIFLE_CLIP_EX
    autoRange: 5
    snapRange: 13
    aimRange: 0
    accuracyAuto: 60
    accuracySnap: 70
    accuracyAimed: 0
    tuAuto: 33
    tuSnap: 22
    tuAimed: 0
    confSnap:
      name: STR_BURST_SNAP_SHOT
      shots: 2
    battleType: 1
    twoHanded: true
    oneHandedPenalty: 25
    invWidth: 2
    invHeight: 3
    armor: 200
    autoShots: 5
    bulletSpeed: 30
    attraction: 1
    listOrder: 10330
    tags:
      REACTION_MULTIPLIER: 150  # multiplies base reaction score by this amount divided by 100
      ITEM_RECOIL: 40

  - type: STR_PRIMARIS_OCCULUS_CARBINE
    refNode: *STR_PRIMARIS_CARBINE_TEMPLATE
    requiresBuyBaseFunc: [TRADE]
    costBuy: 60000
    costSell: 15000
    dropoff: 4  # battle rifle dropoff
    bigSprite: 1051
    floorSprite: 980
    handSprite: 1172
    weight: 25
    accuracyAimed: 90
    snapRange: 15
    aimRange: 20
    tuAuto: 40
    tuSnap: 25
    tuAimed: 45
    autoShots: 3
    oneHandedPenalty: 50
    confSnap:
      name: STR_BURST_SNAP_SHOT
      shots: 2
    tags:
      REACTION_MULTIPLIER: 150  # multiplies base reaction score by this amount divided by 100
      ITEM_AIMED_ACCURACY_POWER_BONUS: 25  # battle rifle aimed shot bonus
      ITEM_POWER_BONUS_PERCENTILE: 1  # use %
      ITEM_RECOIL: 40

  - &STR_PRIMARIS_RIFLE_TEMPLATE
    type: STR_RIFLED  # BOLTER  #        10330  TYPE RIFLE
    requiresBuy:
      - STR_PRIMARIS
      - STR_IMPERIAL_WEAPONS
    categories: [STR_CAT_BOLTER, STR_CAT_TACTICAL]
    requiresBuyBaseFunc: [IMPERIUM]
    size: 0.3
    dropoff: 4
    costBuy: 30000
    costSell: 7500
    weight: 25
    bigSprite: {mod: 40k, index: 350}
    floorSprite: {mod: 40k, index: 204}
    handSprite: {mod: 40k, index: 1576}
    bulletSprite: 6
    fireSound: {mod: 40k, index: 707}
    compatibleAmmo:
      - STR_RIFLE_CLIP
      - STR_RIFLE_CLIP_MC
      - STR_RIFLE_CLIP_AP
      - STR_RIFLE_CLIP_EX
    accuracyAuto: 66
    accuracySnap: 80
    accuracyAimed: 0
    tuAuto: 40
    tuSnap: 25
    tuAimed: 0
    autoRange: 7
    snapRange: 16
    aimRange: 0
    battleType: 1
    twoHanded: true
    invWidth: 2
    invHeight: 3
    armor: 200
    autoShots: 5
    bulletSpeed: 30
    attraction: 1
    listOrder: 10330
    tags:
      ITEM_RECOIL: 40

  - type: STR_PRIMARIS_CAWL_UNDERSLUNG  # BOLTER  #        10330  TYPE RIFLE
    refNode: *STR_PRIMARIS_RIFLE_TEMPLATE
    requiresBuyBaseFunc: [TRADE]
    requiresBuy:
      - STR_PRIMARIS
      - STR_MIDTIER_PREREQ
    bigSprite: 1058
    floorSprite: 983
    handSprite: 1196
    costBuy: 40000
    costSell: 10000
    weight: 30
    aimRange: 16  # GL; snapshot accuracy
    accuracyAimed: 80
    tuAimed: 40
    ammo:
      0:
        compatibleAmmo: [STR_RIFLE_CLIP, STR_RIFLE_CLIP_MC, STR_RIFLE_CLIP_AP, STR_RIFLE_CLIP_EX]
      1:
        compatibleAmmo: [STR_INCENDIARY_GRENADE40, STR_PENITENCE_GRENADE40, STR_KRAK_GRENADE40, STR_MELTA_GRENADE40]
    confAimed:  # Grenade launcher 40mm
      ammoSlot: 1  # Grenades
      name: STR_LAUNCH_GRENADE
      shortName: STR_LAUNCH_GRENADE_SHORT
      arcing: true
    listOrder: 10331

  - type: STR_PRIMARIS_HEAVY_BOLT_PISTOL
    refNode: *STR_PRIMARIS_RIFLE_TEMPLATE
    costBuy: 20000
    costSell: 5000
    dropoff: 6  # pistol
    bigSprite: 1052
    floorSprite: 981
    handSprite: 1180
    weight: 20
    compatibleAmmo:
      - STR_RIFLE_CLIP
      - STR_RIFLE_CLIP_MC
      - STR_RIFLE_CLIP_AP
      - STR_RIFLE_CLIP_EX
      - STR_PISTOL_CLIP
      - STR_PISTOL_CLIP_MC
      - STR_PISTOL_CLIP_AP
      - STR_PISTOL_CLIP_EX
    autoRange: 0
    snapRange: 14
    aimRange: 0
    autoShots: 0
    accuracyAuto: 0
    accuracyAimed: 0
    accuracySnap: 80
    tuAimed: 0
    tuAuto: 0
    tuSnap: 20
    tuLoad: 10
    invWidth: 1
    invHeight: 2
    twoHanded: false
    kneelBonus: 110
    tags:
      ITEM_RECOIL: 40
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100

  - type: STR_PRIMARIS_ABSOLVER_PISTOL
    refNode: *STR_PRIMARIS_RIFLE_TEMPLATE
    costBuy: 60000
    costSell: 15000
    dropoff: 6  # pistol
    bigSprite: 1047
    floorSprite: 976
    handSprite: 1140
    weight: 25
    requiresBuyBaseFunc: [TRADE]
    requiresBuy:
      - STR_PRIMARIS
      - STR_MIDTIER_PREREQ
    compatibleAmmo:  # loads full sized ammo only
      - STR_RIFLE_CLIP
      - STR_RIFLE_CLIP_MC
      - STR_RIFLE_CLIP_AP
      - STR_RIFLE_CLIP_EX
    autoRange: 0
    snapRange: 15
    aimRange: 17
    accuracyAuto: 0
    accuracyAimed: 100
    accuracySnap: 80
    tuAuto: 0
    tuAimed: 40
    tuSnap: 20
    tuLoad: 10
    invWidth: 1
    invHeight: 2
    twoHanded: false
    kneelBonus: 110
    tags:
      ITEM_RECOIL: 50
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100
      ITEM_AIMED_ACCURACY_POWER_BONUS: 25  # battle rifle aimed shot bonus
      ITEM_POWER_BONUS_PERCENTILE: 1  # use %

  - type: STR_PRIMARIS_EXECUTOR_RIFLE
    refNode: *STR_PRIMARIS_RIFLE_TEMPLATE
    dropoff: 4  # battle rifle
    requiresBuyBaseFunc: [TRADE]
    bigSprite: 1048
    floorSprite: 977
    handSprite: 1148
    costBuy: 100000
    costSell: 25000
    weight: 30
    compatibleAmmo:
      - STR_PRIMARIS_EXECUTOR_RIFLE_DRUM_MAG  # to be expanded to include other damage types?
    aimRange: 21
    snapRange: 18
    autoRange: 12
    autoShots: 5
    accuracyAuto: 75
    accuracySnap: 85
    accuracyAimed: 95
    tuAimed: 40
    tuAuto: 33
    tuSnap: 25
    confSnap:
      name: STR_BURST_SNAP_SHOT
      shots: 2
    oneHandedPenalty: 25
    kneelBonus: 130
    tuLoad: 30  # drummag feed; takes longer
    tags:
      ITEM_RECOIL: 45
      ITEM_SNAP_ACCURACY_POWER_BONUS: 10  # battle rifle aimed shot bonus
      ITEM_AIMED_ACCURACY_POWER_BONUS: 25  # battle rifle aimed shot bonus
      ITEM_POWER_BONUS_PERCENTILE: 1  # use %

  - type: STR_PRIMARIS_HEAVY_BOLT_RIFLE  # BOLTER  #        10330  TYPE RIFLE
    refNode: *STR_PRIMARIS_RIFLE_TEMPLATE
    requiresBuyBaseFunc: [TRADE]
    bigSprite: 1053
    floorSprite: 982
    handSprite: 1188
    costBuy: 100000
    costSell: 25000
    weight: 35
    compatibleAmmo:
      - STR_RIFLE_CLIP
      - STR_RIFLE_CLIP_MC
      - STR_RIFLE_CLIP_AP
      - STR_RIFLE_CLIP_EX
      - STR_PRIMARIS_HEAVY_BOLT_RIFLE_DRUM
      - STR_PRIMARIS_HEAVY_BOLT_RIFLE_MC_DRUM
      - STR_PRIMARIS_HEAVY_BOLT_RIFLE_EX_DRUM
      - STR_PRIMARIS_HEAVY_BOLT_RIFLE_AP_DRUM
    autoRange: 10
    autoShots: 10
    accuracyAuto: 70
    accuracySnap: 75
    tuAuto: 45
    tuSnap: 33
    confSnap:
      name: STR_BURST_SNAP_SHOT
      shots: 3
    oneHandedPenalty: 25
    kneelBonus: 130
    tuLoad: 30  # drummag feed; takes longer
    tags:
      ITEM_RECOIL: 50


  - type: STR_PRIMARIS_STALKER_BOLTER  # Designated marksman rifle
    refNode: *STR_PRIMARIS_RIFLE_TEMPLATE
    requiresBuyBaseFunc: [TRADE]
    dropoff: 3  # marksmanrifle
    bigSprite: 1059
    floorSprite: 984
    handSprite: 1204
    costBuy: 100000
    costSell: 25000
    weight: 30
    snapRange: 18
    aimRange: 25
    accuracyAuto: 60
    accuracySnap: 85
    accuracyAimed: 110
    tuAuto: 40
    tuSnap: 33
    tuAimed: 50
    autoShots: 3
    oneHandedPenalty: 25
    kneelBonus: 130
    tags:
      ITEM_SNAP_ACCURACY_POWER_BONUS: 15  # marksman rifle snap shot bonus
      ITEM_AIMED_ACCURACY_POWER_BONUS: 30  # marksman rifle aimed shot bonus
      ITEM_POWER_BONUS_PERCENTILE: 1  # use %


  - &STR_PRIMARIS_HEAVY_BOLT_RIFLE_DRUM_TEMPLATE
    type: STR_PRIMARIS_HEAVY_BOLT_RIFLE_DRUM  #            10410                      ToStun
    categories: [STR_CAT_BOLTER, STR_CAT_TACTICAL]
    requiresBuyBaseFunc: [TRADE]
    size: 0.1
    costBuy: 1000
    costSell: 250
    weight: 6
    bigSprite: 1054
    floorSprite: {mod: 40k, index: 2}  # placeholder
    handSprite: {mod: 40k, index: 464}  # placeholder
    hitSound: {mod: 40k, index: 708}
    hitAnimation: {mod: 40k, index: 26}
    requiresBuy:
      - STR_PRIMARIS
    power: 65
    damageType: 1
    damageAlter:  # DA BOLTER
      ToArmorPre: 0.1
      ArmorEffectiveness: 0.9
      ToArmor: 0.15
      ToHealth: 1.1
      ToStun: 0.5
      ToEnergy: 0.3
      ToWound: 0.2
      RandomWound: false
    explosionSpeed: 5
    clipSize: 60
    battleType: 2
    armor: 100
    invWidth: 1
    invHeight: 2
    listOrder: 10410

  - type: STR_PRIMARIS_HEAVY_BOLT_RIFLE_EX_DRUM  #         10430     EXPLOSIVE        ToStun
    refNode: *STR_PRIMARIS_HEAVY_BOLT_RIFLE_DRUM_TEMPLATE
    costBuy: 3000
    costSell: 750
    bigSprite: 1055
    damageType: 3
    damageAlter:  # DA BOLTER
      ToArmorPre: 0.02
      ArmorEffectiveness: 1.2  # increasing this because it targets under armor and is AoE
      RandomType: 6  # gaussian as it's AoE
      ToArmor: 0.1
      ToHealth: 1.5  # hollow point + fragmentation
      ToStun: 0.6  # hollow point + fragmentation
      ToEnergy: 0.4  # hollow point + fragmentation
      ToWound: 0.3  # hollow point + fragmentation
      IgnoreDirection: false
      RandomWound: false
      FixRadius: 1
    blastRadius: 1
    listOrder: 10430

  - type: STR_PRIMARIS_HEAVY_BOLT_RIFLE_AP_DRUM  #         10440     AP++++++++       ToStun
    refNode: *STR_PRIMARIS_HEAVY_BOLT_RIFLE_DRUM_TEMPLATE
    costBuy: 4000
    costSell: 1000
    bigSprite: 1056
    damageAlter:  # DA BOLTER AP+
      ArmorEffectiveness: 0.5
      ToArmorPre: 0.02
      ToArmor: 0.05
      ToHealth: 0.9  # armor piercing; good penetration, much less stopping power
      ToStun: 0.3
      ToEnergy: 0.1
    listOrder: 10440


  - type: STR_PRIMARIS_HEAVY_BOLT_RIFLE_MC_DRUM  #         10420     MCA              ToStun
    refNode: *STR_PRIMARIS_HEAVY_BOLT_RIFLE_DRUM_TEMPLATE
    costBuy: 0  # gotta make these
    costSell: 2000
    bigSprite: 1057
    floorSprite: {mod: 40k, index: 2}  # placeholder
    handSprite: {mod: 40k, index: 464}  # placeholder
    damageAlter:  # DA BOLTER
      ToArmorPre: 0.15  # was 0.05
      ArmorEffectiveness: 0.8  # was 0.9
      ToArmor: 0.15
      ToHealth: 1.15
      ToStun: 0.5
      ToEnergy: 0.3
      ToWound: 0.2
      RandomWound: false
    power: 85
    listOrder: 10420

  - type: STR_PRIMARIS_EXECUTOR_RIFLE_DRUM_MAG
    refNode: *STR_PRIMARIS_HEAVY_BOLT_RIFLE_DRUM_TEMPLATE
    bigSprite: 1060
    floorSprite: 977
    handSprite: 1212
    costBuy: 4000
    costSell: 1000
    clipSize: 50
    damageType: 1
    power: 70
    damageAlter:  # DA BOLTER
      ToArmorPre: 0.1
      ArmorEffectiveness: 0.9
      ToArmor: 0.15
      ToHealth: 1.1
      ToStun: 0.5
      ToEnergy: 0.3
      ToWound: 0.2
      RandomWound: false
    listOrder: 10430

  - type: STR_PRIMARIS_MELTA_RIFLE  # MELTAGUN
    categories: [STR_CAT_MELTA, STR_CAT_TACTICAL]
    size: 0.5
    dropoff: 6
    costSell: 50000
    weight: 35
    bigSprite: 1049
    floorSprite: 978
    handSprite: 1156
    bulletSprite: {mod: 40k, index: 16}
    bulletSpeed: 100
    fireSound: {mod: 40k, index: 739}
    compatibleAmmo:
      - STR_MELTA_AMMO
    damageBonus:
      flatHundred: 0.2  # 20% power bonus
    accuracySnap: 80
    accuracyAimed: 100
    snapRange: 14
    aimRange: 18
    tuSnap: 40
    tuAimed: 60
    maxRange: 25
    battleType: 1
    twoHanded: true
    oneHandedPenalty: 25
    invWidth: 2
    invHeight: 3
    listOrder: 11101

  - &STR_PRIMARIS_EXTERMINATOR_TEMPLATE
    type: STR_PRIMARIS_EXTERMINATOR
    categories: [STR_CAT_PLASMA, STR_CAT_TACTICAL]
    size: 0.1
    dropoff: 6
    costSell: 50000
    weight: 20
    floorSprite: 971
    handSprite: 1100
    bulletSprite: {mod: 40k, index: 11}
    fireSound: {mod: 40k, index: 18}
    compatibleAmmo:
      - STR_PLASMA_PISTOL_CLIP
    autoRange: 0
    snapRange: 13
    aimRange: 13
    accuracyAuto: 0
    accuracySnap: 70
    accuracyAimed: 70
    tuAuto: 0
    tuSnap: 25
    tuAimed: 25
    confAimed:
      spendPerShot: 4
      name: STR_MAXIMAL_SHOT
    battleType: 1
    invWidth: 2
    invHeight: 2
    armor: 200
    attraction: 1
    listOrder: 11201
    tags:
      ITEM_AIMED_FLAT_POWER_BONUS: 50  # Maximal Shot Bonus
      ITEM_POWER_BONUS_PERCENTILE: 1  # use %
      REACTION_MULTIPLIER: 200  # multiplies base reaction score by this amount divided by 100

  - type: STR_PRIMARIS_EXTERMINATOR_POWER_PACK
    refNode: *STR_PRIMARIS_EXTERMINATOR_TEMPLATE
    compatibleAmmo: []
    vaporColorSurface: {mod: 40k, index: 2}
    vaporDensitySurface: 6
    vaporProbabilitySurface: 18
    hitSound: {mod: 40k, index: 19}
    hitAnimation: {mod: 40k, index: 100}
    power: 90
    damageType: 5
    damageAlter:
      RandomType: 6
      ToArmorPre: 0.1  # melts some armor on the way in
      ArmorEffectiveness: 0.75  # *** PLASMA rebalance
      FireThreshold: 70  # can ignite at high damage
      ToArmor: 0.1
    powerRangeReduction: 5
    powerRangeThreshold: 20.0  # plasma decoheres at longer ranges
    clipSize: 200

  - type: STR_PRIMARIS_INCINERATOR_POWER_PACK
    categories: [STR_CAT_PLASMA, STR_CAT_TACTICAL]
    size: 0.2
    dropoff: 5
    costSell: 100000
    weight: 40
    floorSprite: 973
    handSprite: 1116
    bulletSprite: {mod: 40k, index: 11}
    fireSound: {mod: 40k, index: 18}
    vaporColorSurface: {mod: 40k, index: 2}
    vaporDensitySurface: 6
    vaporProbabilitySurface: 18
    autoRange: 10
    snapRange: 16
    aimRange: 16
    accuracyAuto: 70
    accuracySnap: 80
    accuracyAimed: 80
    tuAuto: 45
    tuSnap: 33
    tuAimed: 33
    confAimed:
      spendPerShot: 4
      name: STR_MAXIMAL_SHOT
    power: 100
    damageType: 5
    damageAlter:
      RandomType: 6
      ToArmorPre: 0.1  # melts some armor on the way in
      ArmorEffectiveness: 0.75  # *** PLASMA rebalance
      FireThreshold: 70  # can ignite at high damage
      ToArmor: 0.1
    powerRangeReduction: 5
    powerRangeThreshold: 20.0  # plasma decoheres at longer ranges
    clipSize: 200
    battleType: 1
    twoHanded: true
    oneHandedPenalty: 25
    invWidth: 2
    invHeight: 3
    armor: 200
    attraction: 1
    listOrder: 11401
    tags:
      ITEM_AIMED_FLAT_POWER_BONUS: 50  # Maximal Shot Bonus
      ITEM_POWER_BONUS_PERCENTILE: 1  # use %

  - &STR_PRIMARIS_VOLKITE_TEMPLATE
    type: STR_PRIMARIS_VOLKITE_CHARGER
    categories: [STR_CAT_MELTA, STR_CAT_TACTICAL]
    twoHanded: true
    battleType: 1
    tuSnap: 24
    snapRange: 14
    accuracySnap: 75
    confSnap:
      name: STR_PULSED_FIRE_SNAP_SHOT
      shots: 3
    bulletSpeed: 200
    power: 45  # individual shots are weak, but the full pulse is lethal
    dropoff: 5
    powerRangeThreshold: 20
    powerRangeReduction: 5
    damageType: 11  # melta; this is the closest thing
    damageAlter:  # DA GUASS
      ArmorEffectiveness: 0.9  # mostly destroys armor; has limited penetration
      ToArmorPre: 0.5  # volkite weapons have substantial armor deflagrating
      FireThreshold: 0  # ignites
      ToHealth: 1.5  # high health damage
      ToMorale: 1.0  # highly painful
      ToStun: 0.5  # highly painful
      ToArmor: 0.0  # all the armor damage is done on the way in
      ToTile: 0.5  # burns away cover
      ToWound: 0.02  # disintegrates rather than causing ugly wounds.
      RandomWound: false
      IgnoreOverKill: false
    vaporColorSurface: {mod: 40k, index: 1}
    vaporDensitySurface: 6
    vaporProbabilitySurface: 18
    bulletSprite: {mod: 40k, index: 23}
    bigSprite: 1046
    floorSprite: 975
    handSprite: 1132
    fireSound: {mod: 40k, index: 18}
    hitSound: {mod: 40k, index: 19}
    hitAnimation: 2120  # fireballhitex
    explosionHitSound: {mod: 40k, index: 690}  # heavy plasma blast
    powerForAnimation: 5
    scripts:
      vaporParticleAmmo: |
        var int temp;

        set subvoxel_velocity subvoxel_trajectory_forward;
        muldiv subvoxel_velocity -3 2;

        random.randomRangeSymmetric temp 100;
        subvoxel_velocity.addX temp;
        random.randomRangeSymmetric temp 100;
        subvoxel_velocity.addY temp;
        random.randomRangeSymmetric temp 100;
        subvoxel_velocity.addZ temp;

        begin;
          var int last 6000;
          sub last subvoxel_trajectory_distance_max;
          add last subvoxel_trajectory_distance;

          if gt last 0;
            set temp 100;
            muldiv temp last 6000;
            random.randomChance temp;
            if gt temp 0;
              muldiv subvoxel_velocity last 6000;
            end;
          else lt subvoxel_trajectory_distance 6000;
            muldiv subvoxel_velocity subvoxel_trajectory_distance 6000;
          end;
        end;
        subvoxel_velocity.addZ 200;
        return;
    clipSize: -1
    explosionSpeed: 1
    listOrder: 18011
    size: 0.4
    costSell: 50000
    weight: 20
    invHeight: 3
    invWidth: 2
    attraction: 7
    tags:
      REACTION_MULTIPLIER: 150  # Carbine weapon

  - type: STR_PRIMARIS_VOLKITE_CALIVER
    refNode: *STR_PRIMARIS_VOLKITE_TEMPLATE
    weight: 30
    power: 50  # individual shots are weak, but the full pulse is lethal
    dropoff: 4
    powerRangeThreshold: 25  # beam decoheres over a longer range
    powerRangeReduction: 4
    bigSprite: 1045
    floorSprite: 974
    handSprite: 1124
    tuSnap: 30
    snapRange: 17
    tags:
      REACTION_MULTIPLIER: 0

  - type: STR_ULTRAcataphract_CORPSE_GEO
    size: 0.2
    recover: true  # without this, corpseGeo doesn't work
    costSell: 35000
    weight: 50
    bigSprite: 2798
    floorSprite: 2799
    invWidth: 2
    invHeight: 3
    armor: 40
    battleType: 11

  - type: STR_ULTRAsaturnine_CORPSE_GEO
    size: 0.2
    recover: true  # without this, corpseGeo doesn't work
    costSell: 35000
    weight: 50
    bigSprite: 3142
    floorSprite: 3143
    invWidth: 2
    invHeight: 3
    armor: 40
    battleType: 11

  - type: STR_STORMBOLTER_PSI_MAG
    categories: [STR_CAT_TERMINATOR, STR_CAT_BOLTER]
    size: 0.2
    costSell: 1000
    weight: 10
    bigSprite: 1107
    floorSprite: {mod: 40k, index: 116}
    handSprite: {mod: 40k, index: 656}
    hitSound: 13
    hitAnimation: 26
    damageBonus: #psionically charged
      psiStrength: 0.5
    damageAlter:  # DA BOLTER  DOUBLE SHOT
      RandomType: 1
      ToArmorPre: 0.2
      ArmorEffectiveness: 0.8
      ToArmor: 0.15
      ToHealth: 1.1
      ToStun: 0.5  # was 1.0
      ToEnergy: 0.3
      ToWound: 0.2
      RandomWound: false
    explosionSpeed: 5
    power: 70
    damageType: 1
    clipSize: 20
    battleType: 2
    armor: 30
    invWidth: 1
    invHeight: 2
    bulletSpeed: 50
    attraction: 8
    listOrder: 13122
    shotgunSpread: 1  # 1/100; hit together
    shotgunBehavior: 1  # new behaviour
    shotgunPellets: 2
    tags: #lethal vs daemons
      DAMAGE_BONUS_PERCENT_DAEMONIC: 150
